<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social - Messaging App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        async function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const messageText = messageInput.value.trim();

            if (messageText !== '') {
                // Append the message locally
                const messageContainer = document.getElementById('messages');
                const messageElement = document.createElement('div');
                messageElement.classList.add('flex', 'justify-end', 'mt-2');
                messageElement.innerHTML = `
                    <div class="bg-blue-500 text-white p-3 rounded-lg max-w-xs">
                        <p>${messageText}</p>
                    </div>
                `;
                messageContainer.appendChild(messageElement);
                messageInput.value = ''; // Clear input field
                messageContainer.scrollTop = messageContainer.scrollHeight; // Scroll to latest message

                // Send the message to the server
                try {
                    const response = await fetch('/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ message: messageText })
                    });

                    const data = await response.json();
                    console.log('Server Response:', data);
                } catch (error) {
                    console.error('Error sending message to server:', error);
                }
            }
        }

        // Handle "Enter" key to send message
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Enter') {
                e.preventDefault(); // Prevent form submission
                sendMessage();
            }
        });
    </script>
</head>
<body class="bg-gray-100">

    <div class="flex h-screen">

        <!-- Sidebar (User List) -->
        <div class="w-1/4 bg-blue-600 text-white p-6 flex flex-col">
            <!-- Profile Section -->
            <div class="flex items-center mb-8">
                <img src="https://via.placeholder.com/50" alt="User" class="rounded-full">
                <div class="ml-4">
                    <h3 class="text-lg font-semibold">John Doe</h3>
                    <p class="text-sm">Online</p>
                </div>
            </div>

            <!-- Search Bar for Users -->
            <input type="text" placeholder="Search contacts..." class="p-3 rounded-md mb-4 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500">

            <!-- User List (Contacts) -->
            <div class="flex flex-col space-y-4 overflow-y-auto">
                <div class="flex items-center space-x-4 cursor-pointer hover:bg-blue-500 p-2 rounded-lg">
                    <img src="https://via.placeholder.com/40" alt="Contact" class="rounded-full">
                    <div>
                        <h4 class="font-semibold">Jane Doe</h4>
                        <p class="text-sm">Hey, how are you?</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4 cursor-pointer hover:bg-blue-500 p-2 rounded-lg">
                    <img src="https://via.placeholder.com/40" alt="Contact" class="rounded-full">
                    <div>
                        <h4 class="font-semibold">Tom Smith</h4>
                        <p class="text-sm">What's up?</p>
                    </div>
                </div>
                <!-- More contacts can be added here -->
            </div>
        </div>

        <!-- Chat Window -->
        <div class="w-3/4 bg-white p-6 flex flex-col">

            <!-- Chat Header -->
            <div class="flex items-center justify-between border-b pb-4 mb-4">
                <div class="flex items-center">
                    <img src="https://via.placeholder.com/40" alt="Contact" class="rounded-full">
                    <div class="ml-4">
                        <h3 class="text-lg font-semibold">Jane Doe</h3>
                        <p class="text-sm text-gray-500">Online</p>
                    </div>
                </div>
                <button class="text-blue-500 hover:text-blue-600 focus:outline-none">Call</button>
            </div>

            <!-- Chat Messages -->
            <div id="messages" class="flex-1 overflow-y-scroll space-y-4 mb-4">
                <!-- Messages will be dynamically added here -->
            </div>

            <!-- Message Input Area -->
            <div class="flex items-center border-t pt-4 mt-4">
                <input id="messageInput" type="text" placeholder="Type a message..." class="p-3 rounded-lg w-full border border-gray-300 mr-4 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <button onclick="sendMessage()" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 focus:outline-none">Send</button>
            </div>
        </div>

    </div>

</body>
</html>
